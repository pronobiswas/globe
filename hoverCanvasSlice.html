<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Slice Canvas Effect</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>

    <img id="image1" src="https://wallpapers.com/images/featured/hd-game-7csw4v0tt93f26q6.jpg" style="display:none;" />
    <canvas id="canvas1"></canvas>

    <script>
        const canvas = document.getElementById('canvas1');
        const ctx = canvas.getContext('2d');

        let effect;

        class Cell {
            constructor(effect, x, y) {
                this.effect = effect;
                this.x = x;
                this.y = y;
                this.width = this.effect.cellWidth;
                this.height = this.effect.cellHeight;
                this.image = document.getElementById('image1');
                this.slideX = 0;
                this.slideY = 0;
                this.vx = 0;
                this.vy = 0;
                this.ease = 0.1;
                this.friction = 0.9;
            }

            draw(context) {
                context.drawImage(
                    this.image,
                    this.x + this.slideX,
                    this.y + this.slideY,
                    this.width,
                    this.height,
                    this.x,
                    this.y,
                    this.width,
                    this.height
                );
            }

            update() {
                if (this.effect.mouse.x !== undefined && this.effect.mouse.y !== undefined) {
                    const dx = this.effect.mouse.x - this.x;
                    const dy = this.effect.mouse.y - this.y;
                    const distance = Math.hypot(dx, dy);

                    if (distance < this.effect.mouse.radius) {
                        const angle = Math.atan2(dy, dx);
                        const force = (this.effect.mouse.radius - distance) / this.effect.mouse.radius;
                        this.vx = +force * Math.cos(angle) * 50; 
                        this.vy = +force * Math.sin(angle) * 50;
                    }
                }

                this.vx *= this.friction;
                this.vy *= this.friction;

                this.slideX += (this.vx - this.slideX) * this.ease;
                this.slideY += (this.vy - this.slideY) * this.ease;
            }
        }

        class Effect {
            constructor(canvas) {
                this.canvas = canvas;
                this.width = canvas.width;
                this.height = canvas.height;
                this.cellWidth = this.width / 200;  
                this.cellHeight = this.height / 150;
                this.imageGrid = [];
                this.mouse = { x: undefined, y: undefined, radius: 450 };

                this.createGrid();

                this.canvas.addEventListener('mousemove', e => {
                    this.mouse.x = e.offsetX;
                    this.mouse.y = e.offsetY;
                });

                this.canvas.addEventListener('mouseleave', e => {
                    this.mouse.x = undefined;
                    this.mouse.y = undefined;
                });
            }

            createGrid() {
                this.imageGrid = [];
                for (let y = 0; y < this.height; y += this.cellHeight) {
                    for (let x = 0; x < this.width; x += this.cellWidth) {
                        this.imageGrid.push(new Cell(this, x, y));
                    }
                }
            }

            render(context) {
                this.imageGrid.forEach(cell => {
                    cell.update();
                    cell.draw(context);
                });
            }
        }

        // Initialize canvas and effect
        function init() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            effect = new Effect(canvas);
        }
        init();

        // Animate loop
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            effect.render(ctx);
            requestAnimationFrame(animate);
        }
        animate();

        // Handle window resize
        window.addEventListener('resize', () => {
            init();
        });
    </script>

</body>

</html>